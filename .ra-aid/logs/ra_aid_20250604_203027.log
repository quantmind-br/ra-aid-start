2025-06-04 20:30:27,627 - ra_aid - DEBUG - Logging configuration: log_mode=file, log_level=debug, root_level=10, logger_level=10, file_level=10, propagate=True
2025-06-04 20:30:27,627 - ra_aid - INFO - Log file created: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid\logs\ra_aid_20250604_203027.log
2025-06-04 20:30:27,627 - ra_aid.ra_aid.__main__ - DEBUG - Starting RA.Aid with arguments: Namespace(message=None, msg_file=None, research_only=False, provider='gemini', model='gemini-2.5-pro-preview-05-06', num_ctx=262144, research_provider=None, research_model=None, planner_provider=None, planner_model=None, cowboy_mode=False, expert_provider='openai', expert_model=None, expert_num_ctx=262144, hil=True, chat=True, log_mode='file', pretty_logger=False, log_level='debug', temperature=None, disable_limit_tokens=True, experimental_fallback_handler=False, recursion_limit=100, aider_config=None, use_aider=False, test_cmd=None, auto_test=False, max_test_cmd_retries=3, test_cmd_timeout=300, server=False, server_host='0.0.0.0', server_port=1818, wipe_project_memory=False, project_state_dir=None, show_thoughts=False, show_cost=False, track_cost=False, reasoning_assistance=False, no_reasoning_assistance=False, custom_tools=None, set_default_provider=None, set_default_model=None)
2025-06-04 20:30:27,629 - ra_aid.ra_aid.database.connection - DEBUG - Base directory for database: C:\Users\Diogo\Dev\ra-aid-start-dev
2025-06-04 20:30:27,629 - ra_aid.ra_aid.database.connection - DEBUG - Creating database directory at: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid
2025-06-04 20:30:27,629 - ra_aid.ra_aid.database.connection - DEBUG - Directory already exists, skipping creation
2025-06-04 20:30:27,629 - ra_aid.ra_aid.database.connection - DEBUG - Directory verification: Path.exists=True, os.path.exists=True, os.path.isdir=True
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Parent directory C:\Users\Diogo\Dev\ra-aid-start-dev permissions: 777
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Parent directory contents: ['.aider.chat.history.md', '.aider.input.history', '.aider.tags.cache.v4', '.git', '.gitignore', '.opencode', '.ra-aid', 'build', 'ra_aid_start', 'ra_aid_start.egg-info', 'setup.py']
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Directory created/verified: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid with permissions 777
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Directory contents: ['logs']
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Database path: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid\pk.db
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Database file exists check: False
2025-06-04 20:30:27,630 - ra_aid.ra_aid.database.connection - DEBUG - Creating empty database file at: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid\pk.db
2025-06-04 20:30:27,631 - ra_aid.ra_aid.database.connection - DEBUG - Empty database file created successfully
2025-06-04 20:30:27,631 - ra_aid.ra_aid.database.connection - DEBUG - Initializing SQLite database at: C:\Users\Diogo\Dev\ra-aid-start-dev\.ra-aid\pk.db
2025-06-04 20:30:27,631 - ra_aid.ra_aid.database.connection - DEBUG - Explicitly connecting to database
2025-06-04 20:30:27,638 - peewee - DEBUG - ('SELECT 1', None)
2025-06-04 20:30:27,638 - ra_aid.ra_aid.database.connection - DEBUG - Database connection verified with test query
2025-06-04 20:30:27,638 - ra_aid.ra_aid.database.connection - DEBUG - Database file check after init: exists=True, size=4096 bytes
2025-06-04 20:30:27,638 - ra_aid.ra_aid.database.connection - DEBUG - Database connection initialized successfully
2025-06-04 20:30:27,638 - ra_aid.ra_aid.database.models - DEBUG - Initializing database proxy
2025-06-04 20:30:27,638 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "session" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "start_time" DATETIME NOT NULL, "command_line" TEXT, "program_version" TEXT, "machine_info" TEXT, "status" VARCHAR(20) NOT NULL)', [])
2025-06-04 20:30:27,642 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "session_status" ON "session" ("status")', [])
2025-06-04 20:30:27,644 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "human_input" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "source" TEXT NOT NULL, "session_id" INTEGER, FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,646 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "humaninput_session_id" ON "human_input" ("session_id")', [])
2025-06-04 20:30:27,648 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_fact" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,648 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keyfact_human_input_id" ON "key_fact" ("human_input_id")', [])
2025-06-04 20:30:27,649 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keyfact_session_id" ON "key_fact" ("session_id")', [])
2025-06-04 20:30:27,651 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_snippet" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "filepath" TEXT NOT NULL, "line_number" INTEGER NOT NULL, "snippet" TEXT NOT NULL, "description" TEXT, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,652 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keysnippet_human_input_id" ON "key_snippet" ("human_input_id")', [])
2025-06-04 20:30:27,654 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keysnippet_session_id" ON "key_snippet" ("session_id")', [])
2025-06-04 20:30:27,655 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "research_note" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,656 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "researchnote_human_input_id" ON "research_note" ("human_input_id")', [])
2025-06-04 20:30:27,658 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "researchnote_session_id" ON "research_note" ("session_id")', [])
2025-06-04 20:30:27,659 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "trajectory" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "human_input_id" INTEGER, "tool_name" TEXT, "tool_parameters" TEXT, "tool_result" TEXT, "step_data" TEXT, "record_type" TEXT, "current_cost" REAL, "input_tokens" INTEGER, "output_tokens" INTEGER, "is_error" INTEGER NOT NULL, "error_message" TEXT, "error_type" TEXT, "error_details" TEXT, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,661 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "trajectory_human_input_id" ON "trajectory" ("human_input_id")', [])
2025-06-04 20:30:27,662 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "trajectory_session_id" ON "trajectory" ("session_id")', [])
2025-06-04 20:30:27,662 - ra_aid.ra_aid.database.models - DEBUG - Ensured database tables exist
2025-06-04 20:30:27,663 - ra_aid.ra_aid.database.models - DEBUG - Database proxy already initialized
2025-06-04 20:30:27,663 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "session" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "start_time" DATETIME NOT NULL, "command_line" TEXT, "program_version" TEXT, "machine_info" TEXT, "status" VARCHAR(20) NOT NULL)', [])
2025-06-04 20:30:27,663 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "session_status" ON "session" ("status")', [])
2025-06-04 20:30:27,664 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "human_input" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "source" TEXT NOT NULL, "session_id" INTEGER, FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,664 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "humaninput_session_id" ON "human_input" ("session_id")', [])
2025-06-04 20:30:27,664 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_fact" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,664 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keyfact_human_input_id" ON "key_fact" ("human_input_id")', [])
2025-06-04 20:30:27,664 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keyfact_session_id" ON "key_fact" ("session_id")', [])
2025-06-04 20:30:27,665 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_snippet" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "filepath" TEXT NOT NULL, "line_number" INTEGER NOT NULL, "snippet" TEXT NOT NULL, "description" TEXT, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,665 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keysnippet_human_input_id" ON "key_snippet" ("human_input_id")', [])
2025-06-04 20:30:27,665 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "keysnippet_session_id" ON "key_snippet" ("session_id")', [])
2025-06-04 20:30:27,665 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "research_note" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "human_input_id" INTEGER, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,665 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "researchnote_human_input_id" ON "research_note" ("human_input_id")', [])
2025-06-04 20:30:27,666 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "researchnote_session_id" ON "research_note" ("session_id")', [])
2025-06-04 20:30:27,666 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "trajectory" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "human_input_id" INTEGER, "tool_name" TEXT, "tool_parameters" TEXT, "tool_result" TEXT, "step_data" TEXT, "record_type" TEXT, "current_cost" REAL, "input_tokens" INTEGER, "output_tokens" INTEGER, "is_error" INTEGER NOT NULL, "error_message" TEXT, "error_type" TEXT, "error_details" TEXT, "session_id" INTEGER, FOREIGN KEY ("human_input_id") REFERENCES "human_input" ("id"), FOREIGN KEY ("session_id") REFERENCES "session" ("id"))', [])
2025-06-04 20:30:27,666 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "trajectory_human_input_id" ON "trajectory" ("human_input_id")', [])
2025-06-04 20:30:27,666 - peewee - DEBUG - ('CREATE INDEX IF NOT EXISTS "trajectory_session_id" ON "trajectory" ("session_id")', [])
2025-06-04 20:30:27,666 - ra_aid.ra_aid.database.models - DEBUG - Ensured database tables exist
2025-06-04 20:30:27,667 - ra_aid.ra_aid.database.migrations - DEBUG - Using migrations directory: C:\Users\Diogo\pipx\venvs\ra-aid\Lib\site-packages\ra_aid\migrations
2025-06-04 20:30:27,667 - ra_aid.ra_aid.database.migrations - DEBUG - Initialized migration router with table: migrationshistory
2025-06-04 20:30:27,667 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "migrationshistory" ("id" INTEGER NOT NULL PRIMARY KEY, "name" VARCHAR(255) NOT NULL, "migrated_at" DATETIME NOT NULL)', [])
2025-06-04 20:30:27,669 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,669 - ra_aid.ra_aid.database.migrations - DEBUG - Found 0 applied migrations and 14 pending migrations
2025-06-04 20:30:27,669 - ra_aid.ra_aid.database.migrations - INFO - Applying 14 pending migrations...
2025-06-04 20:30:27,669 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 002_20250301_212203_add_key_fact_model
2025-06-04 20:30:27,669 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,669 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,670 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,671 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,671 - peewee_migrate.logs - INFO - Migrate "002_20250301_212203_add_key_fact_model"
2025-06-04 20:30:27,671 - peewee_migrate.logs - INFO - Run create_table
2025-06-04 20:30:27,671 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_fact" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL)', [])
2025-06-04 20:30:27,671 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['002_20250301_212203_add_key_fact_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 671887)])
2025-06-04 20:30:27,671 - peewee_migrate.logs - INFO - Done 002_20250301_212203_add_key_fact_model
2025-06-04 20:30:27,674 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 002_20250301_212203_add_key_fact_model
2025-06-04 20:30:27,674 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 003_20250302_163752_add_key_snippet_model
2025-06-04 20:30:27,674 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,674 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,677 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,677 - peewee_migrate.logs - INFO - Migrate "003_20250302_163752_add_key_snippet_model"
2025-06-04 20:30:27,677 - peewee_migrate.logs - INFO - Run create_table
2025-06-04 20:30:27,677 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "key_snippet" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "filepath" TEXT NOT NULL, "line_number" INTEGER NOT NULL, "snippet" TEXT NOT NULL, "description" TEXT)', [])
2025-06-04 20:30:27,678 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['003_20250302_163752_add_key_snippet_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 677468)])
2025-06-04 20:30:27,678 - peewee_migrate.logs - INFO - Done 003_20250302_163752_add_key_snippet_model
2025-06-04 20:30:27,679 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 003_20250302_163752_add_key_snippet_model
2025-06-04 20:30:27,679 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 004_20250302_200312_add_human_input_model
2025-06-04 20:30:27,679 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,679 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,680 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,680 - peewee_migrate.logs - INFO - Migrate "004_20250302_200312_add_human_input_model"
2025-06-04 20:30:27,681 - peewee_migrate.logs - INFO - Run create_table
2025-06-04 20:30:27,681 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "human_input" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "content" TEXT NOT NULL, "source" TEXT NOT NULL)', [])
2025-06-04 20:30:27,681 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['004_20250302_200312_add_human_input_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 681066)])
2025-06-04 20:30:27,681 - peewee_migrate.logs - INFO - Done 004_20250302_200312_add_human_input_model
2025-06-04 20:30:27,682 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 004_20250302_200312_add_human_input_model
2025-06-04 20:30:27,682 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 005_20250302_201611_add_human_input_reference
2025-06-04 20:30:27,682 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,683 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,683 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,683 - peewee_migrate.logs - INFO - Migrate "005_20250302_201611_add_human_input_reference"
2025-06-04 20:30:27,683 - peewee - DEBUG - ('SELECT human_input_id FROM key_fact LIMIT 1', None)
2025-06-04 20:30:27,683 - peewee - DEBUG - ('SELECT human_input_id FROM key_snippet LIMIT 1', None)
2025-06-04 20:30:27,684 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['005_20250302_201611_add_human_input_reference', datetime.datetime(2025, 6, 4, 23, 30, 27, 683604)])
2025-06-04 20:30:27,684 - peewee_migrate.logs - INFO - Done 005_20250302_201611_add_human_input_reference
2025-06-04 20:30:27,685 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 005_20250302_201611_add_human_input_reference
2025-06-04 20:30:27,685 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 006_20250303_211704_add_research_note_model
2025-06-04 20:30:27,685 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,685 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,687 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,687 - peewee_migrate.logs - INFO - Migrate "006_20250303_211704_add_research_note_model"
2025-06-04 20:30:27,687 - peewee - DEBUG - ('SELECT id FROM research_note LIMIT 1', None)
2025-06-04 20:30:27,688 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['006_20250303_211704_add_research_note_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 688226)])
2025-06-04 20:30:27,688 - peewee_migrate.logs - INFO - Done 006_20250303_211704_add_research_note_model
2025-06-04 20:30:27,689 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 006_20250303_211704_add_research_note_model
2025-06-04 20:30:27,689 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 007_20250310_184046_add_trajectory_model
2025-06-04 20:30:27,689 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,689 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,691 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,691 - peewee_migrate.logs - INFO - Migrate "007_20250310_184046_add_trajectory_model"
2025-06-04 20:30:27,691 - peewee - DEBUG - ('SELECT id FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,691 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['007_20250310_184046_add_trajectory_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 691220)])
2025-06-04 20:30:27,691 - peewee_migrate.logs - INFO - Done 007_20250310_184046_add_trajectory_model
2025-06-04 20:30:27,692 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 007_20250310_184046_add_trajectory_model
2025-06-04 20:30:27,692 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 008_20250311_191232_add_session_model
2025-06-04 20:30:27,692 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,693 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,693 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,693 - peewee_migrate.logs - INFO - Migrate "008_20250311_191232_add_session_model"
2025-06-04 20:30:27,693 - peewee - DEBUG - ('SELECT id FROM session LIMIT 1', None)
2025-06-04 20:30:27,694 - peewee_migrate.logs - INFO - Run create_table
2025-06-04 20:30:27,694 - peewee - DEBUG - ('CREATE TABLE IF NOT EXISTS "session" ("id" INTEGER NOT NULL PRIMARY KEY, "created_at" DATETIME NOT NULL, "updated_at" DATETIME NOT NULL, "start_time" DATETIME NOT NULL, "command_line" TEXT, "program_version" TEXT, "machine_info" TEXT)', [])
2025-06-04 20:30:27,694 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['008_20250311_191232_add_session_model', datetime.datetime(2025, 6, 4, 23, 30, 27, 694803)])
2025-06-04 20:30:27,694 - peewee_migrate.logs - INFO - Done 008_20250311_191232_add_session_model
2025-06-04 20:30:27,695 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 008_20250311_191232_add_session_model
2025-06-04 20:30:27,695 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 009_20250311_191517_add_session_fk_to_human_input
2025-06-04 20:30:27,695 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,695 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,696 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,696 - peewee_migrate.logs - INFO - Migrate "009_20250311_191517_add_session_fk_to_human_input"
2025-06-04 20:30:27,697 - peewee - DEBUG - ('SELECT session_id FROM human_input LIMIT 1', None)
2025-06-04 20:30:27,697 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['009_20250311_191517_add_session_fk_to_human_input', datetime.datetime(2025, 6, 4, 23, 30, 27, 697853)])
2025-06-04 20:30:27,697 - peewee_migrate.logs - INFO - Done 009_20250311_191517_add_session_fk_to_human_input
2025-06-04 20:30:27,698 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 009_20250311_191517_add_session_fk_to_human_input
2025-06-04 20:30:27,699 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 010_20250311_191617_add_session_fk_to_key_fact
2025-06-04 20:30:27,699 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,699 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,700 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,700 - peewee_migrate.logs - INFO - Migrate "010_20250311_191617_add_session_fk_to_key_fact"
2025-06-04 20:30:27,700 - peewee - DEBUG - ('SELECT session_id FROM key_fact LIMIT 1', None)
2025-06-04 20:30:27,700 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['010_20250311_191617_add_session_fk_to_key_fact', datetime.datetime(2025, 6, 4, 23, 30, 27, 700449)])
2025-06-04 20:30:27,700 - peewee_migrate.logs - INFO - Done 010_20250311_191617_add_session_fk_to_key_fact
2025-06-04 20:30:27,701 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 010_20250311_191617_add_session_fk_to_key_fact
2025-06-04 20:30:27,701 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 011_20250311_191732_add_session_fk_to_key_snippet
2025-06-04 20:30:27,701 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,702 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,703 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,703 - peewee_migrate.logs - INFO - Migrate "011_20250311_191732_add_session_fk_to_key_snippet"
2025-06-04 20:30:27,703 - peewee - DEBUG - ('SELECT session_id FROM key_snippet LIMIT 1', None)
2025-06-04 20:30:27,704 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['011_20250311_191732_add_session_fk_to_key_snippet', datetime.datetime(2025, 6, 4, 23, 30, 27, 704443)])
2025-06-04 20:30:27,704 - peewee_migrate.logs - INFO - Done 011_20250311_191732_add_session_fk_to_key_snippet
2025-06-04 20:30:27,705 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 011_20250311_191732_add_session_fk_to_key_snippet
2025-06-04 20:30:27,705 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 012_20250311_191832_add_session_fk_to_research_note
2025-06-04 20:30:27,705 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,705 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,706 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,707 - peewee_migrate.logs - INFO - Migrate "012_20250311_191832_add_session_fk_to_research_note"
2025-06-04 20:30:27,707 - peewee - DEBUG - ('SELECT session_id FROM research_note LIMIT 1', None)
2025-06-04 20:30:27,707 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['012_20250311_191832_add_session_fk_to_research_note', datetime.datetime(2025, 6, 4, 23, 30, 27, 707452)])
2025-06-04 20:30:27,707 - peewee_migrate.logs - INFO - Done 012_20250311_191832_add_session_fk_to_research_note
2025-06-04 20:30:27,708 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 012_20250311_191832_add_session_fk_to_research_note
2025-06-04 20:30:27,708 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 013_20250311_191701_add_session_fk_to_trajectory
2025-06-04 20:30:27,708 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,708 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,710 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,710 - peewee_migrate.logs - INFO - Migrate "013_20250311_191701_add_session_fk_to_trajectory"
2025-06-04 20:30:27,710 - peewee - DEBUG - ('SELECT session_id FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,710 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['013_20250311_191701_add_session_fk_to_trajectory', datetime.datetime(2025, 6, 4, 23, 30, 27, 710048)])
2025-06-04 20:30:27,710 - peewee_migrate.logs - INFO - Done 013_20250311_191701_add_session_fk_to_trajectory
2025-06-04 20:30:27,711 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 013_20250311_191701_add_session_fk_to_trajectory
2025-06-04 20:30:27,711 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 014_20250312_140700_add_token_fields_to_trajectory
2025-06-04 20:30:27,711 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,711 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,713 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,713 - peewee_migrate.logs - INFO - Migrate "014_20250312_140700_add_token_fields_to_trajectory"
2025-06-04 20:30:27,714 - peewee - DEBUG - ('SELECT id FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,714 - peewee - DEBUG - ('SELECT input_tokens FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,714 - peewee - DEBUG - ('SELECT output_tokens FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,714 - peewee - DEBUG - ('SELECT current_cost FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,714 - peewee - DEBUG - ('SELECT id FROM trajectory LIMIT 1', None)
2025-06-04 20:30:27,714 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['014_20250312_140700_add_token_fields_to_trajectory', datetime.datetime(2025, 6, 4, 23, 30, 27, 714198)])
2025-06-04 20:30:27,714 - peewee_migrate.logs - INFO - Done 014_20250312_140700_add_token_fields_to_trajectory
2025-06-04 20:30:27,715 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 014_20250312_140700_add_token_fields_to_trajectory
2025-06-04 20:30:27,715 - ra_aid.ra_aid.database.migrations - INFO - Applying migration: 015_20250408_140800_add_session_status
2025-06-04 20:30:27,716 - peewee_migrate.logs - INFO - Starting migrations
2025-06-04 20:30:27,716 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."name", "t1"."migrated_at" FROM "migrationshistory" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:27,717 - peewee - DEBUG - ('BEGIN', None)
2025-06-04 20:30:27,717 - peewee_migrate.logs - INFO - Migrate "015_20250408_140800_add_session_status"
2025-06-04 20:30:27,717 - ra_aid.builtins - INFO - Adding status field to session table
2025-06-04 20:30:27,717 - ra_aid.builtins - ERROR - Error checking or adding 'status' column: 'Migrator' object has no attribute 'router'
2025-06-04 20:30:27,718 - peewee - DEBUG - ('INSERT INTO "migrationshistory" ("name", "migrated_at") VALUES (?, ?)', ['015_20250408_140800_add_session_status', datetime.datetime(2025, 6, 4, 23, 30, 27, 717203)])
2025-06-04 20:30:27,718 - peewee_migrate.logs - INFO - Done 015_20250408_140800_add_session_status
2025-06-04 20:30:27,719 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied migration: 015_20250408_140800_add_session_status
2025-06-04 20:30:27,719 - ra_aid.ra_aid.database.migrations - INFO - Successfully applied 14 migrations
2025-06-04 20:30:27,722 - ra_aid.ra_aid.database.connection - INFO - Database connection closed successfully
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized SessionRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized KeyFactRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized KeySnippetRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized HumanInputRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized ResearchNoteRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized RelatedFilesRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized TrajectoryRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized WorkLogRepository
2025-06-04 20:30:30,518 - ra_aid.ra_aid.__main__ - DEBUG - Initialized ConfigRepository
2025-06-04 20:30:30,519 - ra_aid.ra_aid.__main__ - DEBUG - Initialized Environment Inventory
2025-06-04 20:30:30,519 - ra_aid.ra_aid.__main__ - DEBUG - Initializing new session
2025-06-04 20:30:30,519 - peewee - DEBUG - ('INSERT INTO "session" ("created_at", "updated_at", "start_time", "command_line", "program_version", "machine_info", "status") VALUES (?, ?, ?, ?, ?, ?, ?)', [datetime.datetime(2025, 6, 4, 20, 30, 30, 519435), datetime.datetime(2025, 6, 4, 20, 30, 30, 519435), datetime.datetime(2025, 6, 4, 20, 30, 30, 519435), 'C:\\Users\\Diogo\\.local\\bin\\ra-aid --chat', '0.30.2', None, 'pending'])
2025-06-04 20:30:30,525 - ra_aid.ra_aid.database.repositories.session_repository - DEBUG - Created new session with ID 1 and status pending
2025-06-04 20:30:30,525 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."start_time", "t1"."command_line", "t1"."program_version", "t1"."machine_info", "t1"."status" FROM "session" AS "t1" WHERE ("t1"."id" = ?) LIMIT ? OFFSET ?', [1, 1, 0])
2025-06-04 20:30:30,526 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."start_time", "t1"."command_line", "t1"."program_version", "t1"."machine_info", "t1"."status" FROM "session" AS "t1" WHERE ("t1"."id" = ?) LIMIT ? OFFSET ?', [1, 1, 0])
2025-06-04 20:30:30,527 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."content", "t1"."source", "t1"."session_id" FROM "human_input" AS "t1" WHERE ("t1"."session_id" = ?) ORDER BY "t1"."id" LIMIT ?', [1, 1])
2025-06-04 20:30:31,211 - openai._base_client - DEBUG - Request options: {'method': 'get', 'url': '/models', 'post_parser': <function SyncAPIClient._request_api_list.<locals>._parser at 0x0000022ED5C8B600>, 'json_data': None}
2025-06-04 20:30:31,295 - openai._base_client - DEBUG - Sending HTTP Request: GET https://api.openai.com/v1/models
2025-06-04 20:30:31,295 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-06-04 20:30:31,338 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022EDF992810>
2025-06-04 20:30:31,338 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000022EDF6A55D0> server_hostname='api.openai.com' timeout=5.0
2025-06-04 20:30:31,354 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000022EDF973740>
2025-06-04 20:30:31,354 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 20:30:31,354 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 20:30:31,355 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 20:30:31,355 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 20:30:31,355 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 20:30:31,895 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 04 Jun 2025 23:30:31 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'269'), (b'Connection', b'keep-alive'), (b'www-authenticate', b'Bearer realm="OpenAI API"'), (b'openai-version', b'2020-10-01'), (b'x-request-id', b'35eb35aa04cb366e1e8a4681a1156982'), (b'openai-processing-ms', b'2'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=NcIPvTTqdzzHyRqSJ5zzVw.GErqpXKh1p._sapwuSmo-1749079831-1.0.1.1-R6xQ54UMjAYP7RCgOe22YnZyBCmvb7nPvjKjGc.j8RCnSl_uDwYjqGc5UgV5w7_Afbr3ORxAWHlpfGt7CaIa7D00rHWSLGnJ1wYyOcs5YhA; path=/; expires=Thu, 05-Jun-25 00:00:31 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=QontQ_ZnVN5ZCFsQzxpJrCm0N862uNPJxw5Bi2z9Dy0-1749079831034-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'94ab37ecada56d51-GIG'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-06-04 20:30:31,896 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/models "HTTP/1.1 401 Unauthorized"
2025-06-04 20:30:31,896 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 20:30:31,896 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 20:30:31,896 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 20:30:31,896 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 20:30:31,896 - openai._base_client - DEBUG - HTTP Response: GET https://api.openai.com/v1/models "401 Unauthorized" Headers([('date', 'Wed, 04 Jun 2025 23:30:31 GMT'), ('content-type', 'application/json'), ('content-length', '269'), ('connection', 'keep-alive'), ('www-authenticate', 'Bearer realm="OpenAI API"'), ('openai-version', '2020-10-01'), ('x-request-id', '35eb35aa04cb366e1e8a4681a1156982'), ('openai-processing-ms', '2'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=NcIPvTTqdzzHyRqSJ5zzVw.GErqpXKh1p._sapwuSmo-1749079831-1.0.1.1-R6xQ54UMjAYP7RCgOe22YnZyBCmvb7nPvjKjGc.j8RCnSl_uDwYjqGc5UgV5w7_Afbr3ORxAWHlpfGt7CaIa7D00rHWSLGnJ1wYyOcs5YhA; path=/; expires=Thu, 05-Jun-25 00:00:31 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=QontQ_ZnVN5ZCFsQzxpJrCm0N862uNPJxw5Bi2z9Dy0-1749079831034-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '94ab37ecada56d51-GIG'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-06-04 20:30:31,897 - openai._base_client - DEBUG - request_id: 35eb35aa04cb366e1e8a4681a1156982
2025-06-04 20:30:31,897 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Users\Diogo\pipx\venvs\ra-aid\Lib\site-packages\openai\_base_client.py", line 1014, in request
    response.raise_for_status()
  File "C:\Users\Diogo\pipx\venvs\ra-aid\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/models'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-06-04 20:30:31,899 - openai._base_client - DEBUG - Not retrying
2025-06-04 20:30:31,899 - openai._base_client - DEBUG - Re-raising status error
2025-06-04 20:30:31,899 - ra_aid.ra_aid.__main__ - DEBUG - Environment validation successful
2025-06-04 20:30:31,900 - ra_aid.ra_aid.__main__ - DEBUG - Using default temperature 1.0 for model gemini-2.5-pro-preview-05-06
2025-06-04 20:30:31,900 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."content", "t1"."human_input_id", "t1"."session_id" FROM "key_fact" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:31,900 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."filepath", "t1"."line_number", "t1"."snippet", "t1"."description", "t1"."human_input_id", "t1"."session_id" FROM "key_snippet" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:31,901 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."content", "t1"."human_input_id", "t1"."session_id" FROM "research_note" AS "t1" ORDER BY "t1"."id"', [])
2025-06-04 20:30:31,901 - ra_aid.version_check - DEBUG - Checking for newer version at https://docs.ra-aid.ai/version.json
2025-06-04 20:30:31,903 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): docs.ra-aid.ai:443
2025-06-04 20:30:32,128 - urllib3.connectionpool - DEBUG - https://docs.ra-aid.ai:443 "GET /version.json HTTP/1.1" 200 None
2025-06-04 20:30:32,129 - ra_aid.version_check - DEBUG - Current version: 0.30.2, Latest version: 0.30.2
2025-06-04 20:30:32,129 - ra_aid.version_check - DEBUG - Current version is up-to-date
2025-06-04 20:30:32,131 - ra_aid.ra_aid.llm - DEBUG - Creating LLM client with provider=gemini, model=gemini-2.5-pro-preview-05-06, temperature=1.0, expert=False
2025-06-04 20:30:32,153 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."content", "t1"."source", "t1"."session_id" FROM "human_input" AS "t1" ORDER BY "t1"."created_at" DESC LIMIT ?', [1])
2025-06-04 20:30:32,154 - peewee - DEBUG - ('SELECT "t1"."id", "t1"."created_at", "t1"."updated_at", "t1"."start_time", "t1"."command_line", "t1"."program_version", "t1"."machine_info", "t1"."status" FROM "session" AS "t1" WHERE ("t1"."id" = ?) LIMIT ? OFFSET ?', [1, 1, 0])
2025-06-04 20:30:32,155 - peewee - DEBUG - ('INSERT INTO "trajectory" ("created_at", "updated_at", "human_input_id", "tool_name", "tool_parameters", "tool_result", "step_data", "record_type", "current_cost", "input_tokens", "output_tokens", "is_error", "error_message", "error_type", "error_details", "session_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', [datetime.datetime(2025, 6, 4, 20, 30, 32, 154401), datetime.datetime(2025, 6, 4, 20, 30, 32, 154401), None, '', None, None, '{"stage": "chat_mode", "display_title": "Chat Mode"}', 'stage_transition', None, None, None, False, None, None, None, 1])
2025-06-04 20:30:32,157 - ra_aid.ra_aid.database.repositories.trajectory_repository - DEBUG - Created trajectory record ID 1 of type: stage_transition
2025-06-04 20:30:32,514 - markdown_it.rules_block.code - DEBUG - entering code: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.fence - DEBUG - entering fence: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.blockquote - DEBUG - entering blockquote: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.hr - DEBUG - entering hr: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.list - DEBUG - entering list: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.reference - DEBUG - entering reference: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.html_block - DEBUG - entering html_block: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.heading - DEBUG - entering heading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.lheading - DEBUG - entering lheading: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.paragraph - DEBUG - entering paragraph: StateBlock(line=0,level=0,tokens=0), 0, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.code - DEBUG - entering code: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.fence - DEBUG - entering fence: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.blockquote - DEBUG - entering blockquote: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.hr - DEBUG - entering hr: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.list - DEBUG - entering list: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.reference - DEBUG - entering reference: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,514 - markdown_it.rules_block.html_block - DEBUG - entering html_block: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,515 - markdown_it.rules_block.heading - DEBUG - entering heading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,515 - markdown_it.rules_block.lheading - DEBUG - entering lheading: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,515 - markdown_it.rules_block.paragraph - DEBUG - entering paragraph: StateBlock(line=2,level=0,tokens=3), 2, 3, False
2025-06-04 20:30:32,534 - asyncio - DEBUG - Using proactor: IocpProactor
2025-06-04 20:30:37,493 - ra_aid.ra_aid.database.connection - INFO - Database connection closed successfully
2025-06-04 20:30:37,610 - httpcore.connection - DEBUG - close.started
2025-06-04 20:30:37,611 - httpcore.connection - DEBUG - close.complete
